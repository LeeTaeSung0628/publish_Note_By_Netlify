<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Category]]></title><description><![CDATA[Obsidian digital garden]]></description><link>https://lts.kr/</link><image><url>https://lts.kr/lib/media/favicon.png</url><title>Category</title><link>https://lts.kr/</link></image><generator>Webpage HTML Export plugin for Obsidian</generator><lastBuildDate>Mon, 23 Jun 2025 03:12:04 GMT</lastBuildDate><atom:link href="https://lts.kr/lib/rss.xml" rel="self" type="application/rss+xml"/><pubDate>Mon, 23 Jun 2025 03:12:03 GMT</pubDate><copyright><![CDATA[taesung's Blog]]></copyright><ttl>60</ttl><dc:creator>taesung's Blog</dc:creator><item><title><![CDATA[â˜˜ ANONI Chat - ëª¨ë‹ˆí„°ë§ ë„êµ¬ ì ìš©(Elastic APM) + Slackì•Œë¦¼]]></title><description><![CDATA[<a class="tag" href="https://lts.kr/?query=tag:í”„ë¡œì íŠ¸" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#í”„ë¡œì íŠ¸</a> <a class="tag" href="https://lts.kr/?query=tag:ê°œë°œ" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#ê°œë°œ</a> <a class="tag" href="https://lts.kr/?query=tag:ë³´ì•ˆ" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#ë³´ì•ˆ</a> <a class="tag" href="https://lts.kr/?query=tag:ì¸í”„ë¼" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#ì¸í”„ë¼</a> <a class="tag" href="https://lts.kr/?query=tag:HTTPS" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#HTTPS</a> <a class="tag" href="https://lts.kr/?query=tag:íŠ¸ëŸ¬ë¸”ìŠˆíŒ…" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</a> <a class="tag" href="https://lts.kr/?query=tag:Elasticsearch" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#Elasticsearch</a> <a class="tag" href="https://lts.kr/?query=tag:APM" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#APM</a> <a class="tag" href="https://lts.kr/?query=tag:ëª¨ë‹ˆí„°ë§" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#ëª¨ë‹ˆí„°ë§</a> <a class="tag" href="https://lts.kr/?query=tag:slack" style="background-color: rgb(4, 108, 116); color: white; font-weight: 700; border: none; border-radius: 1em; padding: 0.2em 0.5em;">#slack</a> <br> <a href="https://lts.kr?query=tag:í”„ë¡œì íŠ¸" class="tag is-unresolved" target="_self" rel="noopener nofollow" data-href="#í”„ë¡œì íŠ¸">#í”„ë¡œì íŠ¸</a> <a href="https://lts.kr?query=tag:ê°œë°œ" class="tag is-unresolved" target="_self" rel="noopener nofollow" data-href="#ê°œë°œ">#ê°œë°œ</a> <a href="https://lts.kr?query=tag:ë³´ì•ˆ" class="tag is-unresolved" target="_self" rel="noopener nofollow" data-href="#ë³´ì•ˆ">#ë³´ì•ˆ</a> <a href="https://lts.kr?query=tag:ì¸í”„ë¼" class="tag is-unresolved" target="_self" rel="noopener nofollow" data-href="#ì¸í”„ë¼">#ì¸í”„ë¼</a> <a href="https://lts.kr?query=tag:HTTPS" class="tag is-unresolved" target="_self" rel="noopener nofollow" data-href="#HTTPS">#HTTPS</a> <a href="https://lts.kr?query=tag:íŠ¸ëŸ¬ë¸”ìŠˆíŒ…" class="tag is-unresolved" target="_self" rel="noopener nofollow" data-href="#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…">#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</a> <a href="https://lts.kr?query=tag:Elasticsearch" class="tag is-unresolved" target="_self" rel="noopener nofollow" data-href="#Elasticsearch">#Elasticsearch</a> <a href="https://lts.kr?query=tag:APM" class="tag is-unresolved" target="_self" rel="noopener nofollow" data-href="#APM">#APM</a> <a href="https://lts.kr?query=tag:ëª¨ë‹ˆí„°ë§" class="tag is-unresolved" target="_self" rel="noopener nofollow" data-href="#ëª¨ë‹ˆí„°ë§">#ëª¨ë‹ˆí„°ë§</a> <a href="https://lts.kr?query=tag:slack" class="tag is-unresolved" target="_self" rel="noopener nofollow" data-href="#slack">#slack</a> <br>
<br>ê¸°ì¡´ì˜ ì…‹íŒ…ëœ elK-stackì— elastic APMì„ ì ìš©í•´ ë³´ë„ë¡í•˜ê² ë‹¤.
<br>
<br>APMì€ Application performance Monitoring ì˜ ì•½ìì´ë‹¤.
<br>ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„±ëŠ¥ì •ë³´ ë° ë°œìƒí•œ ë¡œê·¸ì •ë³´, ë™ì‘ì¤‘ì¸ ì„œë²„ì˜ Metricì •ë³´ë¥¼ ìˆ˜ì§‘í•œë‹¤.
<br>MSAí™˜ê²½ì—ì„œ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì„±í•˜ëŠ” ì—¬ëŸ¬ ì•±ê°„ì˜ Requestë¥¼ í•˜ë‚˜ì˜ Traceë¡œ ë¬¶ì–´ì„œ ì¶”ì í•  ìˆ˜ ìˆë‹¤.(ë¶„ì‚° Tracing)
<br>Application ì§€ì—°ì´ ë°œìƒí–ˆì„ ë•Œ, ì§€ì—°ì— ëŒ€í•œ ë³‘ëª© êµ¬ê°„ì„ ì°¾ì•„ë‚¼ ìˆ˜ìˆëŠ” ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤ì´ë‹¤.
<br>Metric ì •ë³´ë€?
ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ë³€í™”í•˜ëŠ” ë°ì´í„°ë¥¼ ì˜ë¯¸í•œë‹¤.<br>
ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ , CPU ì‚¬ìš©ë¥ , ìŠ¤ë ˆë“œ ì‚¬ìš©ë¥  ë“± ì‹œê°„ì— ë”°ë¥¸ ì¶”ì´ë¥¼ ì¶”ì í•  ê°€ì¹˜ê°€ ìˆëŠ” ë°ì´í„°ì´ë‹¤.
ì–´ë–¤ ì„œë¹„ìŠ¤, ì•±ì´ëƒì— ë”°ë¼ í•´ì„ì´ ë‹¬ë¼ì§ˆ ìˆ˜ëŠ” ìˆì§€ë§Œ, ë³´í¸ì ìœ¼ë¡œ ëŒ€ì‹œë³´ë“œë¥¼ ë³¼ë•Œ íŠ¹ì • ìˆ˜ì¹˜ë“¤ì„ ê·¸ë˜í”„ë¡œ ë³´ì—¬ì£¼ëŠ” ì¼ì¢…ì˜ ì‹œê°í™”ë¡œ ì´í•´í•˜ê¸°ë„ í•œë‹¤.
<br>
<br>ELKì˜ ì¼ë¶€ë¡œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„±ëŠ¥ì„ ëª¨ë‹ˆí„°ë§í•˜ê³ , ë¬¸ì œì˜ ì›ì¸ì„ ë¹ ë¥´ê²Œ íŒŒì•…í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ëœ ë„êµ¬.
<br>ë‹¨ìˆœí•œ ë¡œê·¸ ìˆ˜ì§‘ì„ ë„˜ì–´ì„œ, ë¶„ì‚° íŠ¸ë ˆì´ì‹±, ì„œë¹„ìŠ¤ ê°„ í˜¸ì¶œ ì‹œê°„ ë¶„ì„ ë“±, ì• í”Œë¦¬ì¼€ì´ì…˜ ìˆ˜ì¤€ì˜ ê´€ì°° ìˆ˜ì¤€ì„ ì œê³µ
<br>[í´ë¼ì´ì–¸íŠ¸ ìš”ì²­] â†“
[NGINX Reverse Proxy] â†“
[Spring Boot ì»¨í…Œì´ë„ˆ] â”œâ”€â”€ Agentê°€ DispatcherServlet, Service, Repository ë“± Hook â”œâ”€â”€ Transaction ë° Span ê°ì²´ ìƒì„± â””â”€â”€ ë¹„ë™ê¸°ë¡œ APM Serverë¡œ ì „ì†¡ â†“
[APM Server] â””â”€â”€ JSON ìˆ˜ì‹  í›„ Elasticsearchë¡œ ì „ì†¡ â†“
[Elasticsearch] â””â”€â”€ ë¬¸ì„œí™”ëœ ë°ì´í„° ì €ì¥ â†“
[Kibana] â””â”€â”€ íŠ¸ëœì­ì…˜ ì‹œê°í™” ë° ë¶„ì„ <br>APM AgentëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ë¶€ì— ì§ì ‘ íƒ‘ì¬ë˜ì–´ ì‹¤í–‰ ì¤‘ì¸ ì½”ë“œë¥¼ ìë™ ë˜ëŠ” ìˆ˜ë™ ê³„ì¸¡í•´ ì„±ëŠ¥ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ë˜ëŠ” íŒ¨í‚¤ì§€ë‹¤. <br>Javaì—ì„  Elastic APM Java Agentë¼ëŠ” JVM ì—ì´ì „íŠ¸ë¥¼ ë“±ë¡í•˜ì—¬ ì‚¬ìš©.<br>ë©”ì†Œë“œ ì‹¤í–‰ ì‹œê°„ ì¸¡ì •
<br>HTTP ìš”ì²­/ì‘ë‹µ ëª¨ë‹ˆí„°ë§
<br>DB ì¿¼ë¦¬ ì‹¤í–‰ ì‹œê°„ ì¶”ì 
<br>JVM ë©”ëª¨ë¦¬, CPU ì‚¬ìš©ëŸ‰ ìˆ˜ì§‘
<br>ì—ëŸ¬/ì˜ˆì™¸ ë°œìƒ ì‹œ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ ìº¡ì²˜
<br>ìˆ˜ì§‘í•œ ë°ì´í„°ë¥¼ APM Serverë¡œ ì „ì†¡
<br>APM ServerëŠ” ë‹¤ì–‘í•œ APM Agentê°€ ìˆ˜ì§‘í•œ trace/metric/error ë°ì´í„°ë¥¼ ë°›ì•„ Elasticsearchë¡œ ì „ë‹¬í•´ì£¼ëŠ” ë¸Œë¡œì»¤ ì—­í• ì„ í•œë‹¤. <br>ì¦‰, APM agent â†’ APM server â†’ Elasticsearch â†’ Kibana ìˆœìœ¼ë¡œ ì—°ê²°ëœë‹¤.<br>
<br>apm-serverë¥¼ ê¸°ì¡´ docker-compose.yml íŒŒì¼ì— ì¶”ê°€í•œë‹¤.
<br>Springì…‹íŒ…ì— í•„ìš”í•œ ë§¤ê°œë³€ìˆ˜ë„ ì¶”ê°€í•´ì¤€ë‹¤.
<br>Kibanaì— elastic APMí™œì„±í™”ì— í•„ìš”í•œ ì„¤ì •ì„ ì¶”ê°€í•œë‹¤.
<br> # APM Server ì¶”ê°€ apm-server: image: docker.elastic.co/apm/apm-server:7.11.1 container_name: apm-server environment: - output.elasticsearch.hosts=["elasticsearch:9200"] - apm-server.host=0.0.0.0:8200 - apm-server.frontend.enabled=true - apm-server.frontend.rate_limit=100000 - apm-server.read_timeout=1m - apm-server.shutdown_timeout=2m - apm-server.write_timeout=1m - logging.level=info ports: - "8200:8200" networks: - elk depends_on: - elasticsearch # Spring appì— í•„ìš”í•œ ë§¤ê°œë³€ìˆ˜ ì¶”ê°€ spring: image: ghcr.io/anonichat/app/anonichat expose: - "8080" environment: - ELASTICSEARCH_HOST=elasticsearch:9200 ...ìƒëµ ELASTIC_APM_SERVICE_NAME=anonichat-app # APMì—ì„œ í‘œì‹œë  ì„œë¹„ìŠ¤ëª… ELASTIC_APM_SERVER_URLS=http://apm-server:8200 # APM ì„œë²„ ì£¼ì†Œ ELASTIC_APM_APPLICATION_PACKAGES=com.anonichat # ëª¨ë‹ˆí„°ë§í•  íŒ¨í‚¤ì§€ ELASTIC_APM_ENVIRONMENT=docker # í™˜ê²½ êµ¬ë¶„ ELASTIC_APM_LOG_LEVEL=INFO # ë¡œê·¸ ë ˆë²¨ ELASTIC_APM_ENABLE_LOG_CORRELATION=true # ë¡œê·¸ ì—°ê´€ì„± í™œì„±í™” depends_on: - elasticsearch - mysql networks: - elk - data # Kibana APM í™œì„±í™”ì— í•„ìš”í•œ ë§¤ê°œë³€ìˆ˜ ì¶”ê°€ kibana: image: docker.elastic.co/kibana/kibana:7.11.1 ports: - "5601:5601" networks: - elk environment: ... ìƒëµ - xpack.apm.ui.enabled=true # Kibanaì—ì„œ APM ë©”ë‰´ í™œì„±í™” depends_on: - elasticsearch
<br>
<br># apm agent jar ì¶”ê°€
RUN curl -o /app/elastic-apm-agent.jar \ https://repo1.maven.org/maven2/co/elastic/apm/elastic-apm-agent/1.28.4/elastic-apm-agent-1.28.4.jar # apm agent ì‹¤í–‰ ëª…ë ¹ì–´ ì¶”ê°€
ENTRYPOINT ["java", "-javaagent:/app/elastic-apm-agent.jar", "-jar", "/app/AnoniChatApp.jar"]
<br># dependency ì¶”ê°€ // Elastic APM Agent (í”„ë¡œê·¸ë˜ë° ë°©ì‹ ì—°ê²°ìš©)
implementation 'co.elastic.apm:apm-agent-attach:1.50.0' // APM Spring Boot Starter (ìë™ ì„¤ì • - Spring Boot 3.x í˜¸í™˜)
implementation 'co.elastic.apm:elastic-apm-spring-boot-starter:1.50.0' // APMê³¼ ë¡œê·¸ ì—°ë™ (ECS ë¡œê·¸ í˜•ì‹)
implementation 'co.elastic.logging:logback-ecs-encoder:1.6.0'
<br>
<br>
<br>ìœ„ docker-compose.yml íŒŒì¼ì—ì„œ ì„¤ì •í•œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚½ì…í•˜ì—¬ apmì„¤ì •
<br># APM ì„¤ì •
elastic.apm.service-name=${ELASTIC_APM_SERVICE_NAME:anonichat-app}
elastic.apm.server-urls=${ELASTIC_APM_SERVER_URLS:http://localhost:8200}
elastic.apm.application-packages=${ELASTIC_APM_APPLICATION_PACKAGES:Anoni}
elastic.apm.environment=${ELASTIC_APM_ENVIRONMENT:local}
elastic.apm.enabled=${ELASTIC_APM_ENABLED:true}
elastic.apm.transaction-sample-rate=${ELASTIC_APM_SAMPLE_RATE:1.0}
<br>
<br>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration&gt; ... ìƒëµ &lt;!-- ECS í˜•ì‹ appender (Elastic Stack ìµœì í™”, APM ì™„ë²½ ì—°ë™) --&gt; &lt;appender name="ECS_LOGSTASH" class="net.logstash.logback.appender.LogstashTcpSocketAppender"&gt; &lt;destination&gt;logstash:5000&lt;/destination&gt; &lt;!-- ê¸°ì¡´ í¬íŠ¸ 5000 ì‚¬ìš© --&gt; &lt;encoder class="co.elastic.logging.logback.EcsEncoder"&gt; &lt;!-- APM ì„œë¹„ìŠ¤ëª… ì„¤ì • --&gt; &lt;serviceName&gt;${elastic.apm.service-name:-anonichat-app}&lt;/serviceName&gt; &lt;!-- APM íŠ¸ë ˆì´ìŠ¤ ì •ë³´ ìë™ í¬í•¨ --&gt; &lt;includeMarkers&gt;true&lt;/includeMarkers&gt; &lt;includeMdc&gt;true&lt;/includeMdc&gt; &lt;/encoder&gt; &lt;keepAliveDuration&gt;5 minutes&lt;/keepAliveDuration&gt; &lt;/appender&gt; ... ìƒëµ &lt;!-- APM ê´€ë ¨ ë¡œê·¸ ë ˆë²¨ ì„¤ì • --&gt; &lt;logger name="co.elastic.apm" level="INFO" additivity="false"&gt; &lt;appender-ref ref="CONSOLE" /&gt; &lt;/logger&gt; &lt;/configuration&gt;
<br>
ë¡œê·¸ì˜ ë°ì´í„° í˜•ì‹ì„ json í˜•ì‹ &gt; ecs í˜•ì‹ìœ¼ë¡œ ë³€ê²½
<br>ECS(Elastic Common Schema)ë€? Elasticsearchì—ì„œ ì •ì˜í•œ í‘œì¤€í™”ëœ ë¡œê·¸ ë°ì´í„° í˜•ì‹
<br>ECSí˜•ì‹ì˜ ì˜ˆ
<br># ì¼ë°˜ json í˜•ì‹
{ "timestamp": "2025-06-15T14:30:15.123Z", "level": "INFO", "message": "ì‚¬ìš©ì ë¡œê·¸ì¸", "userId": "user123", "ip": "192.168.1.100", "userAgent": "Chrome/91.0"
} # ECS í˜•ì‹
{ "@timestamp": "2025-06-15T14:30:15.123Z", "log": { "level": "INFO" }, "message": "ì‚¬ìš©ì ë¡œê·¸ì¸", "user": { "id": "user123" }, "client": { "ip": "192.168.1.100" }, "user_agent": { "original": "Chrome/91.0" }, "service": { "name": "anonichat-app" }, "trace": { "id": "abc123" }, "transaction": { "id": "def456" }
}
<br>
<br>ëª¨ë“  ì„œë¹„ìŠ¤ì—ì„œ í‘œì¤€í™”ëœ í•„ë“œëª…ì„ ê°€ì§„ë‹¤.
<br>kibana ëŒ€ì‹œë³´ë“œì™€ í˜¸í™˜ì„±ì´ ì¢‹ë‹¤.
<br>apmê³¼ ìë™ ì—°ë™ì´ ëœë‹¤.
<br>ì¼ë°˜ json í˜•ì‹ë³´ë‹¤ í™•ì¥ì„±, í˜¸í™˜ì„±ì´ ì¢‹ì€ ECSë¡œ ë¡œê·¸ í˜•ì‹ì„ ë³€ê²½í–ˆë‹¤.<br>
<br>
<br>í…ŒìŠ¤íŠ¸
<img alt="do-messenger_screenshot_2025-06-19_14_08_30.png" src="https://lts.kr/ì‚¬ì§„-ë°-ë¬¸ì„œ/do-messenger_screenshot_2025-06-19_14_08_30.png" target="_self"> <br> <br>
<br>ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ë“¤ì„ ê³ ë ¤í–ˆì„ ë•Œ, Logstash Alerting ë¥¼ ì„ íƒí•˜ì˜€ë‹¤.
<br>í˜„ì¬ì—ë„ ì¸ìŠ¤í„´ìŠ¤ì˜ ë¦¬ì†ŒìŠ¤ ê³¼ë¶€í•˜ ë¬¸ì œê°€ ìˆê¸° ë•Œë¬¸ì—, ê°€ë²¼ìš´ ë…€ì„ì„ ê³¨ëë‹¤.
<br>ElastAlertì€ ë¬´ê²ê³ , ë…ë¦½ ì‹¤í–‰ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ë¦¬ì†ŒìŠ¤ ê³¼ë¶€í•˜ë¥¼ í”¼í•  ìˆ˜ ì—†ë‹¤.
<br>Kibana WatcherëŠ” ë¬´ë£Œ ë¼ì´ì„¼ìŠ¤ì—ì„œì˜ ì œí•œì ì¸ ê¸°ëŠ¥ê³¼, ê³ ê¸‰ ì¡°ê±´ì´ ë¶ˆê°€í•˜ì—¬ ì¶”ì  ë° ë””ë²„ê¸°ì— í•œê³„ê°€ ìˆë‹¤.
<br>LogstashëŠ” í˜„ì¬ ëª¨ë‘ êµ¬í˜„ë˜ì–´ ìˆëŠ” ìƒíƒœì´ê³  ì„¤ì •íŒŒì¼ì— ëª‡ ì¤„ë§Œ ì¶”ê°€í•˜ë©´ ì•Œë¦¼ ì„¤ì •ì„ ë§ˆì¹  ìˆ˜ ìˆë‹¤.<br><img alt="do-messenger_screenshot_2025-06-23_11_43_48.png" src="https://lts.kr/ì‚¬ì§„-ë°-ë¬¸ì„œ/do-messenger_screenshot_2025-06-23_11_43_48.png" style="width: 550px; max-width: 100%;" target="_self"> <br><img alt="do-messenger_screenshot_2025-06-23_11_43_55.png" src="https://lts.kr/ì‚¬ì§„-ë°-ë¬¸ì„œ/do-messenger_screenshot_2025-06-23_11_43_55.png" style="width: 775px; max-width: 100%;" target="_self"><br><img alt="do-messenger_screenshot_2025-06-23_11_44_05.png" src="https://lts.kr/ì‚¬ì§„-ë°-ë¬¸ì„œ/do-messenger_screenshot_2025-06-23_11_44_05.png" style="width: 800px; max-width: 100%;" target="_self"><br>ì›¹í›… urlì„ ë°œê¸‰ë°›ëŠ”ë‹¤.
<br>
<br>input { beats { port =&gt; 5044 } tcp { port =&gt; 5000 codec =&gt; json_lines type =&gt; "main_log" } } filter { if [type] == "main_log" { if [log.level] in ["ERROR", "INFO", "FATAL"] { # INFOëŠ” í˜„ì¬ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ë„£ìŒ mutate { add_field =&gt; { "alert_needed" =&gt; "true" } } } }
} output { # 5000ë²ˆ í¬íŠ¸ë¡œ ì˜¤ëŠ” ëª¨ë“  ì•Œë¦¼ì€ `main_logë¡œ ë“¤ì–´ì™€ elasticì— ì €ì¥` if [type] == "main_log" { elasticsearch { hosts =&gt; ["http://elasticsearch:9200"] index =&gt; "main_log" } } ######################## ì¶”ê°€ ë¶€ë¶„ ########################## # ["ERROR", "INFO", "FATAL"] ì— í•´ë‹¹ í•˜ëŠ” ì•Œë¦¼ì€ ìŠ¬ë ‰ìœ¼ë¡œ output ì²˜ë¦¬ if [alert_needed] == "true" { # error ë ˆë²¨ ë°œìƒ ì‹œ ì•Œë ¤ì¤Œ http { url =&gt; "https://hooks.slack.com/services/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" # output í”ŒëŸ¬ê·¸ì¸ ì‚¬ìš© http_method =&gt; "post" # Slack Webhook URLë¡œ `POST` ìš”ì²­ ì „ì†¡. content_type =&gt; "application/json" format =&gt; "json" mapping =&gt; { # ë©”ì‹œì§€ëŠ” `%{}` ë¬¸ë²•ìœ¼ë¡œ í•„ë“œ ê°’ì„ ë¬¸ìì—´ì— ì‚½ì…: "text" =&gt; "ğŸš¨ *AnoniChat ì—ëŸ¬ ë°œìƒ!*``` ë ˆë²¨: %{[log.level]} ì‹œê°„: %{[@timestamp]} ìŠ¤ë ˆë“œ: %{[process.thread.name]} ë¡œê±°: %{[log.logger]} ë©”ì‹œì§€: %{message} Trace ID: %{[trace.id]} ì„œë¹„ìŠ¤: %{[service.name]} ```" "channel" =&gt; "#anonichat-error-log" } } } ##########################################################
}
<br>
<br>ì´í›„ì— logstash ì¬ì‹œì‘.
<br>docker-compose restart logstash
<br>
<br>anonichat.world(APP) ë¡œ ì ‘ì†í•´ì„œ -info ë¡œê·¸ê°€ ë‘ ë²ˆ ì°íˆëŠ”ì§€ í…ŒìŠ¤íŠ¸
<br>@GetMapping(GlobalURL.MAIN_URL) public ModelAndView mainView() { log.info("[MainController Log] mainView ì ‘ì† TEST"); List&lt;TestEntity&gt; list = testRepository.findAll(); log.info("[MainController Log] test_table data: {}", list); return new ModelAndView("main"); }
<br><img alt="do-messenger_screenshot_2025-06-23_12_07_38.png" src="https://lts.kr/ì‚¬ì§„-ë°-ë¬¸ì„œ/do-messenger_screenshot_2025-06-23_12_07_38.png" style="width: 1125px; max-width: 100%;" target="_self"><br>INFO ë¡œê·¸ê°€ ì •ìƒ ì¶œë ¥ë˜ëŠ” ëª¨ìŠµ. (log.infoë¡œ í…ŒìŠ¤íŠ¸)
<br>ì´í›„ logstash.confì—ì„œ INFOë¥¼ ë¹¼ê³  error ë ˆë²¨ë§Œ ì•ŒëŒì´ ìš¸ë¦¬ë„ë¡ ì¡°ì •ì„ ë‹¤ì‹œ í•´ì¤¬ë‹¤.]]></description><link>https://lts.kr/project/new-project/â˜˜-anoni-chat-ëª¨ë‹ˆí„°ë§-ë„êµ¬-ì ìš©(elastic-apm)-+-slackì•Œë¦¼.html</link><guid isPermaLink="false">project/New Project/â˜˜ ANONI Chat - ëª¨ë‹ˆí„°ë§ ë„êµ¬ ì ìš©(Elastic APM) + Slackì•Œë¦¼.md</guid><dc:creator><![CDATA[taesung's Blog]]></dc:creator><pubDate>Mon, 23 Jun 2025 03:11:29 GMT</pubDate><enclosure url="https://lts.kr/ì‚¬ì§„-ë°-ë¬¸ì„œ/do-messenger_screenshot_2025-06-19_14_08_30.png" length="0" type="image/png"/><content:encoded>&lt;figure&gt;&lt;img src="https://lts.kr/ì‚¬ì§„-ë°-ë¬¸ì„œ/do-messenger_screenshot_2025-06-19_14_08_30.png"&gt;&lt;/figure&gt;</content:encoded></item></channel></rss>